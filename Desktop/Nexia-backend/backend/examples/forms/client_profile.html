<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nexia – Client Profile (Create)</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial; margin: 2rem; line-height: 1.5; }
    form { max-width: 820px; padding: 16px; border: 1px solid #e5e7eb; border-radius: 8px; }
    .grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 12px; }
    label { display: block; font-weight: 600; margin-top: 12px; }
    input, select, textarea { width: 100%; padding: 10px; border: 1px solid #cbd5e1; border-radius: 6px; }
    textarea { min-height: 80px; }
    button { margin-top: 16px; padding: 10px 16px; border-radius: 6px; border: 1px solid #2563eb; background: #2563eb; color: #fff; cursor: pointer; }
    pre { background: #0b1021; color: #e5e7eb; padding: 12px; border-radius: 8px; overflow: auto; }
    .hint { color: #6b7280; font-size: .9rem; }
  </style>
</head>
<body>
  <h1>Create Client Profile – Nexia API</h1>
  <p class="hint">Requires a valid Bearer token from the login example. Endpoint: <code>POST https://nexiaapp.com/api/v1/clients/</code></p>

  <label for="token">Bearer token</label>
  <input id="token" type="text" placeholder="Paste access_token here" />

  <form id="clientForm">
    <div class="grid">
      <div>
        <label for="nombre">Nombre</label>
        <input id="nombre" name="nombre" type="text" placeholder="John" required />
      </div>
      <div>
        <label for="apellidos">Apellidos</label>
        <input id="apellidos" name="apellidos" type="text" placeholder="Smith" required />
      </div>
      <div>
        <label for="mail">Email</label>
        <input id="mail" name="mail" type="email" placeholder="john@example.com" required />
      </div>
      <div>
        <label for="telefono">Teléfono</label>
        <input id="telefono" name="telefono" type="text" placeholder="+34 600 000 000" />
      </div>
      <div>
        <label for="sexo">Sexo</label>
        <select id="sexo" name="sexo">
          <option value="">(none)</option>
          <option value="Masculino">Masculino</option>
          <option value="Femenino">Femenino</option>
        </select>
      </div>
      <div>
        <label for="edad">Edad</label>
        <input id="edad" name="edad" type="number" min="13" max="100" />
      </div>
      <div>
        <label for="peso">Peso (kg)</label>
        <input id="peso" name="peso" type="number" step="0.1" min="20" max="300" />
      </div>
      <div>
        <label for="altura">Altura (m)</label>
        <input id="altura" name="altura" type="number" step="0.01" min="1.0" max="2.5" />
      </div>
      <div>
        <label for="objetivo">Objetivo entrenamiento</label>
        <input id="objetivo" name="objetivo_entrenamiento" type="text" placeholder="fuerza / hipertrofia / ..." />
      </div>
      <div>
        <label for="fecha_obj">Fecha definición objetivo</label>
        <input id="fecha_obj" name="fecha_definicion_objetivo" type="date" />
      </div>
      <div>
        <label for="experiencia">Experiencia</label>
        <input id="experiencia" name="experiencia" type="text" placeholder="beginner / intermediate / advanced" />
      </div>
      <div>
        <label for="frecuencia">Frecuencia semanal</label>
        <input id="frecuencia" name="frecuencia_semanal" type="text" placeholder="3 / 4 / 5 ..." />
      </div>
    </div>

    <label for="lesiones">Lesiones relevantes</label>
    <textarea id="lesiones" name="lesiones_relevantes" placeholder="..."></textarea>

    <label for="observaciones">Observaciones</label>
    <textarea id="observaciones" name="observaciones" placeholder="..."></textarea>

    <button type="submit">Create profile</button>
  </form>

  <h3>Response</h3>
  <pre id="output">Submit the form to see the API response...</pre>

  <script>
    const API_BASE = "https://nexiaapp.com/api/v1";
    const form = document.getElementById("clientForm");
    const out = document.getElementById("output");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      out.textContent = "Submitting...";

      const payload = {
        nombre: form.nombre.value.trim(),
        apellidos: form.apellidos.value.trim(),
        mail: form.mail.value.trim(),
        telefono: form.telefono.value.trim() || null,
        sexo: form.sexo.value || null,
        observaciones: document.getElementById("observaciones").value || null,
        edad: form.edad.value ? Number(form.edad.value) : null,
        peso: form.peso.value ? Number(form.peso.value) : null,
        altura: form.altura.value ? Number(form.altura.value) : null,
        objetivo_entrenamiento: document.getElementById("objetivo").value || null,
        fecha_definicion_objetivo: document.getElementById("fecha_obj").value || null,
        descripcion_objetivos: null,
        experiencia: document.getElementById("experiencia").value || null,
        lesiones_relevantes: document.getElementById("lesiones").value || null,
        frecuencia_semanal: document.getElementById("frecuencia").value || null,
      };

      try {
        const res = await fetch(`${API_BASE}/clients/`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${document.getElementById("token").value.trim()}`,
          },
          body: JSON.stringify(payload),
        });
        const text = await res.text();
        out.textContent = `Status: ${res.status}\n\n${text}`;
      } catch (err) {
        out.textContent = String(err);
      }
    });
  </script>
</body>
</html>


